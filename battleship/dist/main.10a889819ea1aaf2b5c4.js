"use strict";(self.webpackChunkbattleship=self.webpackChunkbattleship||[]).push([[792],{7:(t,e,r)=>{r.d(e,{H:()=>n});class n{constructor(t,e){this.game=t,this.view=e}async start(){this.view.renderBoards(this.game.player1.board,this.game.player2.board);let t=!1;for(;!t;){const e=t=>new Promise(e=>setTimeout(e,t));await e(250),this.view.updateMessage(`${this.game.currentPlayer.name}'s Turn`),await e(250);let r={status:!1};for(;!r.status;)r=await this.game.performTurn(),this.view.updateMessage(r.note);if(this.view.renderBoards(this.game.player1.board,this.game.player2.board),this.game.isOver()){t=!0,this.view.updateMessage(`${this.game.getWinner().name} Wins`);break}this.game.switchTurn()}return this.game.getWinner()}}},40:(t,e,r)=>{r.d(e,{x:()=>n});class n{#t;#e;constructor(t,e){this.#t=t,this.#e=e}equals(t){return this.#t===t.getX()&&this.#e===t.getY()}getX(){return this.#t}getY(){return this.#e}setX(t){this.#t=t}setY(t){this.#e=t}setCoordinate(t,e){this.setX(t),this.setY(e)}getCoordinate(){return[this.#t,this.#e]}toString(){return`[${this.#t}, ${this.#e}]`}}},56:(t,e,r)=>{t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var a={},i=[],o=0;o<t.length;o++){var c=t[o],l=n.base?c[0]+n.base:c[0],h=a[l]||0,u="".concat(l," ").concat(h);a[l]=h+1;var d=r(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=s(p,n);n.byIndex=o,e.splice(o,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function s(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,s){var a=n(t=t||[],s=s||{});return function(t){t=t||[];for(var i=0;i<a.length;i++){var o=r(a[i]);e[o].references--}for(var c=n(t,s),l=0;l<a.length;l++){var h=r(a[l]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}a=c}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},177:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(354),s=r.n(n),a=r(314),i=r.n(a)()(s());i.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};","",{version:3,sources:["webpack://./src/styles/styles.css"],names:[],mappings:"AAAA;QACS,CAAA",sourcesContent:["// extracted by mini-css-extract-plugin\nexport {};"],sourceRoot:""}]);const o=i},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r}).join("")},e.i=function(t,r,n,s,a){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(n)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(i[c]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);n&&i[h[0]]||(void 0!==a&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),r&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=r):h[2]=r),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},354:t=>{t.exports=function(t){var e=t[1],r=t[3];if(!r)return e;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),a="/*# ".concat(s," */");return[e].concat([a]).join("\n")}return[e].join("\n")}},385:(t,e,r)=>{r.d(e,{P:()=>a});var n=r(40);class s{#r;#n;constructor(t){if(t<1||!Number.isInteger(t))throw new Error("Ship's Length Must be Positive Integer");this.#n=t,this.#r=0}hit(){this.#n>this.#r&&this.#r++}isSunk(){return this.#r===this.#n}getHits(){return this.#r}getLength(){return this.#n}}class a{static BOARD_SIZE=10;static MAX_COORDINATE=this.BOARD_SIZE-1;constructor(){this.initializeBoard()}initializeBoard(){this.board=Array.from({length:a.BOARD_SIZE},()=>Array(a.BOARD_SIZE).fill(null)),this.misses=new Set,this.hits=new Set,this.ships=[]}#s(t){const[e,r]=t.getCoordinate();return e>a.MAX_COORDINATE||r>a.MAX_COORDINATE||e<0||r<0}#a(t,e,r){let[n,s]=e.getCoordinate();for(let e=0;e<t.getLength();++e){if(("vertical"===r?n+e:n)>=a.BOARD_SIZE||("horizontal"===r?s+e:s)>=a.BOARD_SIZE)return!0;if("horizontal"===r){if(null!==this.board[n][s+e])return!0}else if("vertical"===r&&null!==this.board[n+e][s])return!0}return!1}#i(t,e,r){let[n,s]=e.getCoordinate();for(let e=0;e<t.getLength();++e)"horizontal"===r?this.board[n][s+e]=t:"vertical"===r&&(this.board[n+e][s]=t)}recieveAttack(t){if(this.#s(t))return{status:!1,note:"outOfBounds"};const e=t.toString();if(this.hits.has(e)||this.misses.has(e))return{status:!1,note:"alreadyAttacked"};const[r,n]=t.getCoordinate();return null===this.board[r][n]?(this.misses.add(e),{status:!0,note:"miss"}):(this.board[r][n].hit(),this.hits.add(e),this.board[r][n].isSunk()?{status:!0,note:"shipSunked"}:{status:!0,note:"ship"})}placeShip(t,e,r){if("horizontal"!==r&&"vertical"!==r)return{status:!1,note:"invalidOrientation"};const[n,s]=e.getCoordinate();return this.#s(e)||"horizontal"===r&&s+t.length>a.BOARD_SIZE||"vertical"===r&&n+t.length>a.BOARD_SIZE?{status:!1,note:"outOfBounds"}:this.#a(t,e,r)?{status:!1,note:"overlap"}:(this.ships.push(t),this.#i(t,e,r),{status:!0,note:"shipPlaced"})}randomPlaceShip(){this.initializeBoard();const t=[5,4,3,3,2];for(const e of t){let t=!1;for(;!t;){const r=Math.random()<.5?"horizontal":"vertical",i="vertical"===r?Math.floor(Math.random()*(a.BOARD_SIZE-e+1)):Math.floor(Math.random()*a.BOARD_SIZE),o="horizontal"===r?Math.floor(Math.random()*(a.BOARD_SIZE-e+1)):Math.floor(Math.random()*a.BOARD_SIZE),c=new s(e),l=new n.x(i,o);t=this.placeShip(c,l,r).status}}}allShipSunk(){return 0!==this.ships.length&&this.ships.every(t=>t.isSunk())}}},402:(t,e,r)=>{var n=r(72),s=r.n(n),a=r(825),i=r.n(a),o=r(659),c=r.n(o),l=r(56),h=r.n(l),u=r(540),d=r.n(u),p=r(113),f=r.n(p),m=r(177),y={};y.styleTagTransform=f(),y.setAttributes=h(),y.insert=c().bind(null,"head"),y.domAPI=i(),y.insertStyleElement=d(),s()(m.A,y),m.A&&m.A.locals&&m.A.locals},497:(t,e,r)=>{r.a(t,async(t,e)=>{try{r(402);var n=r(905),s=r(385),a=r(631),i=r(680),o=r(7);const t=new i.S,c=n.y.createPlayer("human","Player",new s.P);c.moveStrategy.getMoveFn=async e=>new Promise(e=>{t.onCellClick=t=>e(t)}),c.board.randomPlaceShip();const l=n.y.createPlayer("ai","Computer",new s.P);l.board.randomPlaceShip();const h=new a.Z(c,l),u=new o.H(h,t),d=await u.start();console.log(d),e()}catch(t){e(t)}},1)},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},631:(t,e,r)=>{r.d(e,{Z:()=>n});class n{constructor(t,e){this.player1=t,this.player2=e,this.currentPlayer=t}getOpponent(t){return t===this.player1?this.player2:this.player1}playMove(t){return this.getOpponent(this.currentPlayer).board.recieveAttack(t)}async performTurn(){const t=this.getOpponent(this.currentPlayer),e=await this.currentPlayer.makeMove(t.board);return this.playMove(e)}checkWinner(t){return t.getBoard().allShipSunk()}getWinner(){return this.player1.getBoard().allShipSunk()?this.player2:this.player1}isOver(){return this.player1.board.allShipSunk()||this.player2.board.allShipSunk()}switchTurn(){this.currentPlayer=this.currentPlayer===this.player1?this.player2:this.player1}}},659:t=>{var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},680:(t,e,r)=>{r.d(e,{S:()=>s});var n=r(40);class s{constructor(t){this.playerBoardContainer=document.querySelector("#player-board"),this.enemyBoardContainer=document.querySelector("#enemy-board"),this.messageContainer=document.querySelector("#message"),this.onCellClick=()=>{}}renderBoards(t,e){this._renderBoard(this.playerBoardContainer,t,!1),this._renderBoard(this.enemyBoardContainer,e,!0)}_renderBoard(t,e,r){t.innerHTML="";const s=e.board,a=e.misses,i=e.hits,o=t.parentElement.querySelector(".board-title");r?(o.innerText="Enemy's Board",o.style.color="orange"):(o.innerText="Player's Board",o.style.color="skyblue");for(let e=0;e<s.length;++e)for(let o=0;o<s[e].length;++o){const c=document.createElement("div");c.classList.add("field"),null!==s[e][o]&&(!s[e][o].isSunk()&&r||c.classList.add("ship"));const l=new n.x(e,o).toString();a.has(l)?c.classList.add("miss"):i.has(l)&&c.classList.add("hit"),r&&this.onCellClick&&c.addEventListener("click",()=>{this.onCellClick([e,o])}),t.appendChild(c)}}updateMessage(t){this.messageContainer.innerText=t}}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var s=void 0!==r.layer;s&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,s&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},905:(t,e,r)=>{r.d(e,{y:()=>c});class n{constructor(t,e,r){this.name=t,this.board=e,this.moveStrategy=r}makeMove(t){return this.moveStrategy.getMove(t)}getBoard(){return this.board}}var s=r(40);class a{getMove(t){throw new Error("getMove() must be implemented by subclass")}}class i extends a{constructor(t){super(),this.getMoveFn=t??null}async getMove(t){const e=await this.getMoveFn(t);return new s.x(e[0],e[1])}}class o extends a{getMove(t){let e;do{e=`${Math.floor(Math.random()*t.board.length)},${Math.floor(Math.random()*t.board.length)}`}while(t.misses.has(e)||t.hits.has(e));const[r,n]=e.split(",").map(Number);return new s.x(r,n)}}class c{static createPlayer(t,e,r){switch(t.toLowerCase()){case"human":return new n(e,r,new i);case"ai":return new n(e,r,new o);default:throw new Error(`Unknown player type: ${t}`)}}}}},t=>{t(t.s=497)}]);
//# sourceMappingURL=main.10a889819ea1aaf2b5c4.js.map